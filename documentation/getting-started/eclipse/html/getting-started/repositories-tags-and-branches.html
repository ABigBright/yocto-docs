<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>2.4.1. Repositories, Tags, and Branches</title>
<link rel="stylesheet" type="text/css" href="../book.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="Getting Started With Yocto Project">
<link rel="up" href="git.html" title="2.4. Git">
<link rel="prev" href="git.html" title="2.4. Git">
<link rel="next" href="basic-commands.html" title="2.4.2. Basic Commands">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="2.4.1. Repositories, Tags, and Branches">
<div class="titlepage"><div><div><h3 class="title">
<a name="repositories-tags-and-branches"></a>2.4.1. Repositories, Tags, and Branches</h3></div></div></div>
<p>
            As mentioned briefly in the previous section and also in the
            "<a class="link" href="workflows.html" title="2.3. Workflows">Workflows</a>" section,
            the Yocto Project maintains source repositories at
            <a class="ulink" href="http://git.yoctoproject.org/cgit.cgi" target="_self">http://git.yoctoproject.org/cgit.cgi</a>.
            If you look at this web-interface of the repositories, each item
            is a separate Git repository.
        </p>
<p>
            Git repositories use branching techniques that track content
            change (not files) within a project (e.g. a new feature or updated
            documentation).
            Creating a tree-like structure based on project divergence allows
            for excellent historical information over the life of a project.
            This methodology also allows for an environment from which you can
            do lots of local experimentation on projects as you develop
            changes or new features.
        </p>
<p>
            A Git repository represents all development efforts for a given
            project.
            For example, the Git repository <code class="filename">poky</code> contains
            all changes and developments for Poky over the course of its
            entire life.
            That means that all changes that make up all releases are captured.
            The repository maintains a complete history of changes.
        </p>
<p>
            You can create a local copy of any repository by "cloning" it
            with the <code class="filename">git clone</code> command.
            When you clone a Git repository, you end up with an identical
            copy of the repository on your development system.
            Once you have a local copy of a repository, you can take steps to
            develop locally.
            For examples on how to clone Git repositories, see the
            "<a class="link" href="../dev-manual/working-with-yocto-project-source-files.html" target="_self">Working With Yocto Project Source Files</a>"
            section in the Yocto Project Development Tasks Manual.
        </p>
<p>
            It is important to understand that Git tracks content change and
            not files.
            Git uses "branches" to organize different development efforts.
            For example, the <code class="filename">poky</code> repository has
            several branches that include the current "sumo"
            branch, the "master" branch, and many branches for past
            Yocto Project releases.
            You can see all the branches by going to
            <a class="ulink" href="http://git.yoctoproject.org/cgit.cgi/poky/" target="_self">http://git.yoctoproject.org/cgit.cgi/poky/</a> and
            clicking on the
            <code class="filename"><a class="ulink" href="http://git.yoctoproject.org/cgit.cgi/poky/refs/heads" target="_self">[...]</a></code>
            link beneath the "Branch" heading.
        </p>
<p>
            Each of these branches represents a specific area of development.
            The "master" branch represents the current or most recent
            development.
            All other branches represent offshoots of the "master" branch.
        </p>
<p>
            When you create a local copy of a Git repository, the copy has
            the same set of branches as the original.
            This means you can use Git to create a local working area
            (also called a branch) that tracks a specific development branch
            from the upstream source Git repository.
            in other words, you can define your local Git environment to
            work on any development branch in the repository.
            To help illustrate, consider the following example Git commands:
            </p>
<pre class="literallayout">
     $ cd ~
     $ git clone git://git.yoctoproject.org/poky
     $ cd poky
     $ git checkout -b sumo origin/sumo
            </pre>
<p>
            In the previous example after moving to the home directory, the
            <code class="filename">git clone</code> command creates a
            local copy of the upstream <code class="filename">poky</code> Git repository.
            By default, Git checks out the "master" branch for your work.
            After changing the working directory to the new local repository
            (i.e. <code class="filename">poky</code>), the
            <code class="filename">git checkout</code> command creates
            and checks out a local branch named "sumo", which
            tracks the upstream "origin/sumo" branch.
            Changes you make while in this branch would ultimately affect
            the upstream "sumo" branch of the
            <code class="filename">poky</code> repository.
        </p>
<p>
            It is important to understand that when you create and checkout a
            local working branch based on a branch name,
            your local environment matches the "tip" of that particular
            development branch at the time you created your local branch,
            which could be different from the files in the "master" branch
            of the upstream repository.
            In other words, creating and checking out a local branch based on
            the "sumo" branch name is not the same as
            cloning and checking out the "master" branch if the repository.
            Keep reading to see how you create a local snapshot of a Yocto
            Project Release.
        </p>
<p>
            Git uses "tags" to mark specific changes in a repository.
            Typically, a tag is used to mark a special point such as the final
            change before a project is released.
            You can see the tags used with the <code class="filename">poky</code> Git
            repository by going to
            <a class="ulink" href="http://git.yoctoproject.org/cgit.cgi/poky/" target="_self">http://git.yoctoproject.org/cgit.cgi/poky/</a> and
            clicking on the
            <code class="filename"><a class="ulink" href="http://git.yoctoproject.org/cgit.cgi/poky/refs/tags" target="_self">[...]</a></code>
            link beneath the "Tag" heading.
        </p>
<p>
            Some key tags for the <code class="filename">poky</code> are
            <code class="filename">jethro-14.0.3</code>,
            <code class="filename">morty-16.0.1</code>,
            <code class="filename">pyro-17.0.0</code>, and
            <code class="filename">sumo-20.0.0</code>.
            These tags represent Yocto Project releases.
        </p>
<p>
            When you create a local copy of the Git repository, you also
            have access to all the tags in the upstream repository.
            Similar to branches, you can create and checkout a local working
            Git branch based on a tag name.
            When you do this, you get a snapshot of the Git repository that
            reflects the state of the files when the change was made associated
            with that tag.
            The most common use is to checkout a working branch that matches
            a specific Yocto Project release.
            Here is an example:
            </p>
<pre class="literallayout">
     $ cd ~
     $ git clone git://git.yoctoproject.org/poky
     $ cd poky
     $ git fetch --all --tags --prune
     $ git checkout tags/pyro-17.0.0 -b my-pyro-17.0.0
            </pre>
<p>
            In this example, the name of the top-level directory of your
            local Yocto Project repository is <code class="filename">poky</code>.
            After moving to the <code class="filename">poky</code> directory, the
            <code class="filename">git fetch</code> command makes all the upstream
            tags available locally in your repository.
            Finally, the <code class="filename">git checkout</code> command
            creates and checks out a branch named "my-pyro-17.0.0" that is
            based on the specific change upstream in the repository
            associated with the "pyro-17.0.0" tag.
            The files in your repository now exactly match that particular
            Yocto Project release as it is tagged in the upstream Git
            repository.
            It is important to understand that when you create and
            checkout a local working branch based on a tag, your environment
            matches a specific point in time and not the entire development
            branch (i.e. the "tip" of the branch).
        </p>
</div></body>
</html>
