<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>2.8.5.7. Stamp Files and the Rerunning of Tasks</title>
<link rel="stylesheet" type="text/css" href="../book.css">
<meta name="generator" content="DocBook XSL Stylesheets V1.76.1">
<link rel="home" href="index.html" title="Getting Started With Yocto Project">
<link rel="up" href="bitbake-dev-environment.html" title="2.8.5. BitBake">
<link rel="prev" href="sdk-generation-dev-environment.html" title="2.8.5.6. SDK Generation">
<link rel="next" href="setscene-tasks-and-shared-state.html" title="2.8.5.8. Setscene Tasks and Shared State">
</head>
<body bgcolor="white" text="black" link="#0000FF" vlink="#840084" alink="#0000FF"><div class="section" title="2.8.5.7. Stamp Files and the Rerunning of Tasks">
<div class="titlepage"><div><div><h4 class="title">
<a name="stamp-files-and-the-rerunning-of-tasks"></a>2.8.5.7. Stamp Files and the Rerunning of Tasks</h4></div></div></div>
<p>
                For each task that completes successfully, BitBake writes a
                stamp file into the
                <a class="link" href="../ref-manual/var-STAMPS_DIR.html" target="_self"><code class="filename">STAMPS_DIR</code></a>
                directory.
                The beginning of the stamp file's filename is determined by the
                <a class="link" href="../ref-manual/var-STAMP.html" target="_self"><code class="filename">STAMP</code></a>
                variable, and the end of the name consists of the task's name
                and current
                <a class="link" href="overview-checksums.html" title="3.3.2. Checksums (Signatures)">input checksum</a>.
                </p>
<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
                    This naming scheme assumes that
                    <a class="link" href="../bitbake-user-manual/var-BB_SIGNATURE_HANDLER.html" target="_self"><code class="filename">BB_SIGNATURE_HANDLER</code></a>
                    is "OEBasicHash", which is almost always the case in
                    current OpenEmbedded.
                </div>
<p>
                To determine if a task needs to be rerun, BitBake checks if a
                stamp file with a matching input checksum exists for the task.
                If such a stamp file exists, the task's output is assumed to
                exist and still be valid.
                If the file does not exist, the task is rerun.
                </p>
<div class="note" title="Note" style="margin-left: 0.5in; margin-right: 0.5in;">
<h3 class="title">Note</h3>
<p>The stamp mechanism is more general than the shared
                    state (sstate) cache mechanism described in the
                    "<a class="link" href="setscene-tasks-and-shared-state.html" title="2.8.5.8. Setscene Tasks and Shared State">Setscene Tasks and Shared State</a>"
                    section.
                    BitBake avoids rerunning any task that has a valid
                    stamp file, not just tasks that can be accelerated through
                    the sstate cache.</p>
<p>However, you should realize that stamp files only
                    serve as a marker that some work has been done and that
                    these files do not record task output.
                    The actual task output would usually be somewhere in
                    <a class="link" href="../ref-manual/var-TMPDIR.html" target="_self"><code class="filename">TMPDIR</code></a>
                    (e.g. in some recipe's
                    <a class="link" href="../ref-manual/var-WORKDIR.html" target="_self"><code class="filename">WORKDIR</code></a>.)
                    What the sstate cache mechanism adds is a way to cache task
                    output that can then be shared between build machines.
                    </p>
</div>
<p>
                Since <code class="filename">STAMPS_DIR</code> is usually a subdirectory
                of <code class="filename">TMPDIR</code>, removing
                <code class="filename">TMPDIR</code> will also remove
                <code class="filename">STAMPS_DIR</code>, which means tasks will
                properly be rerun to repopulate <code class="filename">TMPDIR</code>.
            </p>
<p>
                If you want some task to always be considered "out of date",
                you can mark it with the
                <a class="link" href="../bitbake-user-manual/variable-flags.html" target="_self"><code class="filename">nostamp</code></a>
                varflag.
                If some other task depends on such a task, then that task will
                also always be considered out of date, which might not be what
                you want.
            </p>
<p>
                For details on how to view information about a task's
                signature, see the
                "<a class="link" href="../dev-manual/dev-viewing-task-variable-dependencies.html" target="_self">Viewing Task Variable Dependencies</a>"
                section in the Yocto Project Development Tasks Manual.
            </p>
</div></body>
</html>
